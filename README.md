# WhisperLive å®¢æˆ¶ç«¯

å³æ™‚èªéŸ³è½‰æ–‡å­—èˆ‡ç¿»è­¯å·¥å…·ï¼Œä½¿ç”¨ OpenAI Whisper æ¨¡å‹ã€‚æ”¯æ´ Apple Silicon GPU åŠ é€Ÿã€‚

## åŠŸèƒ½ç‰¹è‰²

- âœ… å³æ™‚èªéŸ³è½‰æ–‡å­—ï¼ˆTranscribeï¼‰
- âœ… å³æ™‚èªéŸ³ç¿»è­¯æˆè‹±æ–‡ï¼ˆTranslateï¼‰
- âœ… Apple Silicon GPU åŠ é€Ÿï¼ˆMLX ç‰ˆæœ¬ï¼‰
- âœ… **è‡ªè¨‚æ¨¡å‹è½‰æ›** - æ”¯æ´ HuggingFace ä¸Šçš„ä»»ä½• Whisper æ¨¡å‹
- âœ… **æµ®å‹•å­—å¹•è¦–çª—** - é©ç”¨æ–¼å…¨è¢å¹•ç°¡å ±æ™‚é¡¯ç¤ºå³æ™‚å­—å¹•

## ç‰ˆæœ¬æ¯”è¼ƒ

| ç‰ˆæœ¬ | ç›®éŒ„ | é‹ç®— | ç‰¹æ€§ |
|------|------|------|------|
| WhisperLive | `/` (æ ¹ç›®éŒ„) | CPU | å³æ™‚ä¸²æµï¼Œé‚Šèªªé‚Šé¡¯ç¤º |
| MLX Whisper | `/mlx` | Apple GPU | æ›´å¿«é€Ÿåº¦ï¼Œèªªå®Œæ‰è¾¨è­˜ï¼Œæ”¯æ´è‡ªè¨‚æ¨¡å‹ |
| æµ®å‹•å­—å¹• | `/mlx/subtitle` | Apple GPU | å…¨è¢å¹•ç°¡å ±æ™‚é¡¯ç¤ºå­—å¹• |

**å»ºè­°ï¼š** å¦‚æœä½ æœ‰ Apple Silicon Macï¼Œæ¨è–¦ä½¿ç”¨ `mlx/` ç›®éŒ„çš„ MLX ç‰ˆæœ¬ï¼Œé€Ÿåº¦æ›´å¿«ä¸”æ”¯æ´è‡ªè¨‚æ¨¡å‹ã€‚

---

## MLX Whisper ç‰ˆæœ¬ï¼ˆApple GPUï¼‰âš¡ æ¨è–¦

ä½¿ç”¨ Apple Silicon GPU åŠ é€Ÿï¼Œæ”¯æ´è½‰æ›å’Œä½¿ç”¨ HuggingFace ä¸Šçš„ä»»ä½• Whisper æ¨¡å‹ã€‚

### å¿«é€Ÿé–‹å§‹

```bash
# å®‰è£ç³»çµ±ä¾è³´
brew install ffmpeg portaudio

# è¨­ç½®ç’°å¢ƒ
cd whisper-live-client/mlx
uv venv
uv pip install mlx-whisper pyaudio numpy
```

### å³æ™‚èªéŸ³è¾¨è­˜

å¯ä»¥ç›´æ¥ä½¿ç”¨ HuggingFace ä¸Šçš„ MLX æ¨¡å‹ï¼ˆæœƒè‡ªå‹•ä¸‹è¼‰ï¼‰ï¼Œæˆ–ä½¿ç”¨è‡ªè¡Œè½‰æ›çš„æ¨¡å‹ã€‚

#### ä½¿ç”¨ HuggingFace æ¨¡å‹ï¼ˆè‡ªå‹•ä¸‹è¼‰ï¼‰

```bash
# ç´”è½‰éŒ„ï¼ˆä½¿ç”¨é è¨­çš„ whisper-large-v3ï¼‰
uv run python transcribe_only.py

# ç¿»è­¯æˆè‹±æ–‡
uv run python transcribe.py
```

#### ä½¿ç”¨æœ¬åœ°è½‰æ›çš„æ¨¡å‹

```bash
# åŸºæœ¬ä½¿ç”¨ï¼ˆè‡ªå‹•åµæ¸¬èªè¨€ï¼‰
uv run python realtime.py

# åˆ—å‡ºå¯ç”¨æ¨¡å‹
uv run python realtime.py --list

# æŒ‡å®šæ¨¡å‹
uv run python realtime.py --model whisper-large-v2-taiwanese-hakka-v1-mlx

# ç¿»è­¯æˆè‹±æ–‡
uv run python realtime.py --task translate

# æŒ‡å®šèªè¨€
uv run python realtime.py --language zh
```

### æ¨¡å‹é¸æ“‡å»ºè­°

âš ï¸ **æ•ˆèƒ½æç¤ºï¼š** å¦‚æœä½ çš„ Mac æ™¶ç‰‡ä¸æ˜¯ M4ï¼Œå»ºè­°ä½¿ç”¨ `medium` æˆ–æ›´å°çš„æ¨¡å‹ï¼Œä»¥ç²å¾—æ›´æµæš¢çš„é«”é©—ã€‚

| æ™¶ç‰‡ | å»ºè­°æ¨¡å‹ |
|------|----------|
| M4 / M4 Pro / M4 Max | `large-v3`ï¼ˆæœ€ä½³å“è³ªï¼‰|
| M3 / M3 Pro / M3 Max | `large-v3` æˆ– `medium` |
| M2 / M2 Pro / M2 Max | `medium` æˆ– `small` |
| M1 / M1 Pro / M1 Max | `small` æˆ– `base` |

### è½‰æ›è‡ªè¨‚æ¨¡å‹ï¼ˆå¯é¸ï¼‰

å¦‚æœéœ€è¦ä½¿ç”¨ç‰¹å®šèªè¨€çš„å¾®èª¿æ¨¡å‹ï¼ˆå¦‚è‡ºç£å®¢èªï¼‰ï¼Œå¯ä»¥å°‡ HuggingFace ä¸Šçš„ Whisper æ¨¡å‹è½‰æ›ç‚º MLX æ ¼å¼ï¼š

```bash
cd convert

# è½‰æ›æ¨¡å‹ï¼ˆä¾‹å¦‚è‡ºç£å®¢èªæ¨¡å‹ï¼‰
./convert.sh formospeech/whisper-large-v2-taiwanese-hakka-v1

# è½‰æ›å…¶ä»–æ¨¡å‹
./convert.sh openai/whisper-large-v3
```

è½‰æ›å¾Œçš„æ¨¡å‹å­˜æ”¾åœ¨ `models/` ç›®éŒ„ã€‚

### åƒæ•¸èªªæ˜

| åƒæ•¸ | ç°¡å¯« | èªªæ˜ | é è¨­å€¼ |
|------|------|------|--------|
| `--model` | `-m` | æ¨¡å‹åç¨±æˆ–è·¯å¾‘ | ç¬¬ä¸€å€‹å¯ç”¨æ¨¡å‹ |
| `--task` | `-t` | `transcribe`ï¼ˆè½‰éŒ„ï¼‰æˆ– `translate`ï¼ˆç¿»è­¯æˆè‹±æ–‡ï¼‰| `transcribe` |
| `--language` | `-l` | èªè¨€ä»£ç¢¼ï¼ˆzh, en, ja...ï¼‰| è‡ªå‹•åµæ¸¬ |
| `--list` | | åˆ—å‡ºå¯ç”¨æ¨¡å‹ | |

ğŸ‘‰ è©³ç´°èªªæ˜è«‹çœ‹ [mlx/README.md](mlx/README.md)

---

## æµ®å‹•å­—å¹•è¦–çª—ï¼ˆç°¡å ±ç”¨ï¼‰ğŸ¤

é©ç”¨æ–¼ Google Slidesã€PowerPointã€Keynote ç­‰å…¨è¢å¹•ç°¡å ±æ™‚ï¼Œå³æ™‚é¡¯ç¤ºå­—å¹•ã€‚

### ç‰¹è‰²

- å­—å¹•è¦–çª—å§‹çµ‚é¡¯ç¤ºåœ¨æœ€ä¸Šå±¤ï¼ˆåŒ…æ‹¬å…¨è¢å¹•æ‡‰ç”¨ä¸Šæ–¹ï¼‰
- åŠé€æ˜èƒŒæ™¯ï¼Œä¸æœƒéåº¦é®æ“‹ç°¡å ±å…§å®¹
- å¯æ‹–å‹•èª¿æ•´ä½ç½®
- å¯è‡ªè¨‚è¦–çª—å¤§å°ã€å­—é«”å¤§å°ã€é¡è‰²
- æ”¯æ´æœ¬åœ°è½‰æ›çš„æ¨¡å‹

### å¿«é€Ÿé–‹å§‹

```bash
cd whisper-live-client/mlx/subtitle
uv venv
uv pip install mlx-whisper pyaudio numpy pyobjc-framework-Cocoa

# åŸºæœ¬ä½¿ç”¨
uv run python subtitle.py

# æŒ‡å®šæ¨¡å‹å’Œä»»å‹™
uv run python subtitle.py -m whisper-large-v2-taiwanese-hakka-v1-mlx -t transcribe
```

### ç°¡å ±æµç¨‹

1. å…ˆè½‰æ›æ¨¡å‹ï¼ˆå¦‚æœé‚„æ²’æœ‰çš„è©±ï¼‰
2. å•Ÿå‹•å­—å¹•ç¨‹å¼ï¼Œç­‰å¾…é¡¯ç¤ºã€Œæº–å‚™å°±ç·’ã€
3. æ‹–å‹•å­—å¹•è¦–çª—åˆ°é©åˆçš„ä½ç½®ï¼ˆä¾‹å¦‚è¢å¹•åº•éƒ¨ï¼‰
4. é–‹å•Ÿç°¡å ±è»Ÿé«”ä¸¦é€²å…¥å…¨è¢å¹•æ¨¡å¼
5. é–‹å§‹èªªè©±ï¼Œå­—å¹•æœƒå³æ™‚é¡¯ç¤º
6. æŒ‰ `Ctrl+C` çµæŸç¨‹å¼

ğŸ‘‰ è©³ç´°èªªæ˜è«‹çœ‹ [mlx/subtitle/README.md](mlx/subtitle/README.md)

---

## WhisperLive ç‰ˆæœ¬ï¼ˆCPUï¼‰

ä½¿ç”¨ CPU é‹ç®—ï¼Œç‰¹è‰²æ˜¯ã€Œé‚Šèªªé‚Šé¡¯ç¤ºã€çš„å³æ™‚ä¸²æµæ•ˆæœã€‚

### è¨­ç½®æ­¥é©Ÿ

```bash
brew install portaudio

cd whisper-live-client
uv venv
uv pip install whisper-live pyaudio
```

### ä½¿ç”¨æ–¹å¼

éœ€è¦é–‹å•Ÿå…©å€‹çµ‚ç«¯è¦–çª—ã€‚

**å•Ÿå‹•ä¼ºæœå™¨ï¼ˆçµ‚ç«¯è¦–çª— 1ï¼‰ï¼š**
```bash
uv run python server.py
```

**å•Ÿå‹•å®¢æˆ¶ç«¯ï¼ˆçµ‚ç«¯è¦–çª— 2ï¼‰ï¼š**
```bash
# ä¸­æ–‡ç¿»è­¯æˆè‹±æ–‡
uv run python transcribe.py

# ç´”ä¸­æ–‡è½‰éŒ„ï¼ˆä¸ç¿»è­¯ï¼‰
uv run python transcribe_only.py
```

---

## åŠŸèƒ½èªªæ˜

### Transcribeï¼ˆè½‰éŒ„ï¼‰

å°‡èªéŸ³è½‰æˆæ–‡å­—ï¼Œä¿æŒåŸæœ¬çš„èªè¨€ã€‚

### Translateï¼ˆç¿»è­¯ï¼‰

å°‡ä»»ä½•èªè¨€çš„èªéŸ³ç¿»è­¯æˆè‹±æ–‡ã€‚

**æ³¨æ„ï¼š** Whisper çš„ `translate` åŠŸèƒ½åªèƒ½ç¿»è­¯æˆè‹±æ–‡ã€‚

---

## æ”¯æ´çš„æ¨¡å‹

### MLX ç¤¾ç¾¤æ¨¡å‹ï¼ˆè‡ªå‹•ä¸‹è¼‰ï¼‰

âš ï¸ **é‡è¦ï¼šturbo ç‰ˆæœ¬ä¸æ”¯æ´ç¿»è­¯åŠŸèƒ½ï¼**

| æ¨¡å‹ | å¤§å° | ç¿»è­¯æ”¯æ´ | å»ºè­°æ™¶ç‰‡ |
|------|------|----------|----------|
| `mlx-community/whisper-large-v3-mlx` | ~3 GB | âœ… æ”¯æ´ | M3/M4 |
| `mlx-community/whisper-large-v3-turbo` | ~1.6 GB | âŒ ä¸æ”¯æ´ | M2/M3/M4 |
| `mlx-community/whisper-medium-mlx` | ~1.5 GB | âœ… æ”¯æ´ | M1/M2/M3/M4 |
| `mlx-community/whisper-small-mlx` | ~488 MB | âœ… æ”¯æ´ | å…¨éƒ¨ |
| `mlx-community/whisper-base-mlx` | ~145 MB | âœ… æ”¯æ´ | å…¨éƒ¨ |
| `mlx-community/whisper-tiny-mlx` | ~75 MB | âœ… æ”¯æ´ | å…¨éƒ¨ |

### æœ¬åœ°è½‰æ›æ¨¡å‹

å¯ä»¥è½‰æ› HuggingFace ä¸Šçš„ä»»ä½• Whisper æ¨¡å‹ï¼š

| æ¨¡å‹ | èªªæ˜ |
|------|------|
| `formospeech/whisper-large-v2-taiwanese-hakka-v1` | è‡ºç£å®¢èª |
| `openai/whisper-large-v3` | OpenAI å®˜æ–¹æœ€æ–°æ¨¡å‹ |
| å…¶ä»– Whisper å¾®èª¿æ¨¡å‹ | éƒ½å¯ä»¥è½‰æ›ä½¿ç”¨ |

### WhisperLive ç‰ˆæœ¬æ¨¡å‹

| æ¨¡å‹ | å¤§å° | é€Ÿåº¦ | æº–ç¢ºåº¦ |
|------|------|------|--------|
| `tiny` | ~75 MB | æœ€å¿« | è¼ƒä½ |
| `base` | ~145 MB | å¿« | åŸºæœ¬ |
| `small` | ~488 MB | ä¸­ç­‰ | å¥½ |
| `medium` | ~1.5 GB | è¼ƒæ…¢ | å¾ˆå¥½ |
| `large-v3` | ~3 GB | æœ€æ…¢ | æœ€å¥½ |

---

## èªè¨€ä»£ç¢¼

| èªè¨€ | ä»£ç¢¼ |
|------|------|
| ä¸­æ–‡ | `zh` |
| è‹±æ–‡ | `en` |
| æ—¥æ–‡ | `ja` |
| éŸ“æ–‡ | `ko` |
| è‡ºç£å®¢èª | `zh`ï¼ˆä½¿ç”¨å°ˆç”¨æ¨¡å‹ï¼‰|
| è‡ªå‹•åµæ¸¬ | ä¸è¨­å®šèªè¨€åƒæ•¸ |

---

## ç–‘é›£æ’è§£

### éº¥å…‹é¢¨æ¸¬è©¦

å¦‚æœèªªè©±å¾Œæ²’æœ‰é¡¯ç¤ºçµæœï¼Œå…ˆæ¸¬è©¦éº¥å…‹é¢¨ï¼š

```bash
uv run python test_mic.py
```

è‹¥éŸ³é‡æ¢ä¸å‹•ï¼š
1. æª¢æŸ¥ **ç³»çµ±è¨­å®š** â†’ **éš±ç§èˆ‡å®‰å…¨æ€§** â†’ **éº¥å…‹é¢¨** â†’ ç¢ºèªçµ‚ç«¯æ©Ÿæœ‰æ¬Šé™
2. æª¢æŸ¥ **ç³»çµ±è¨­å®š** â†’ **è²éŸ³** â†’ **è¼¸å…¥** â†’ ç¢ºèªé¸å°éº¥å…‹é¢¨ä¸”éŸ³é‡è¶³å¤ 

### ç¢ºèª MLX ç‰ˆæœ¬æœ‰ä½¿ç”¨ GPU

åŸ·è¡Œæ™‚æ‰“é–‹ã€Œæ´»å‹•ç›£è¦–å™¨ã€â†’ã€ŒGPUã€åˆ†é ï¼Œæ‡‰è©²æœƒçœ‹åˆ° Python æ­£åœ¨ä½¿ç”¨ GPUã€‚

### Port 9090 è¢«ä½”ç”¨ï¼ˆWhisperLive ç‰ˆæœ¬ï¼‰

```bash
./kill_server.sh
# æˆ–
lsof -ti:9090 | xargs kill -9
```

---

## ç›®éŒ„çµæ§‹

```
whisper-live-client/
â”œâ”€â”€ README.md
â”œâ”€â”€ server.py              # WhisperLive ä¼ºæœå™¨
â”œâ”€â”€ transcribe.py          # WhisperLive å®¢æˆ¶ç«¯ï¼ˆç¿»è­¯ï¼‰
â”œâ”€â”€ transcribe_only.py     # WhisperLive å®¢æˆ¶ç«¯ï¼ˆè½‰éŒ„ï¼‰
â”œâ”€â”€ test_mic.py            # éº¥å…‹é¢¨æ¸¬è©¦
â”œâ”€â”€ kill_server.sh         # æ¸…ç† port 9090
â”‚
â””â”€â”€ mlx/                   # MLX ç‰ˆæœ¬ï¼ˆApple GPUï¼‰
    â”œâ”€â”€ README.md
    â”œâ”€â”€ realtime.py        # ğŸ¤ å³æ™‚èªéŸ³è¾¨è­˜ï¼ˆæœ¬åœ°æ¨¡å‹ï¼‰
    â”œâ”€â”€ transcribe.py      # ç¿»è­¯ï¼ˆHF æ¨¡å‹è‡ªå‹•ä¸‹è¼‰ï¼‰
    â”œâ”€â”€ transcribe_only.py # è½‰éŒ„ï¼ˆHF æ¨¡å‹è‡ªå‹•ä¸‹è¼‰ï¼‰
    â”‚
    â”œâ”€â”€ convert/           # æ¨¡å‹è½‰æ›å·¥å…·
    â”‚   â”œâ”€â”€ convert.sh     # è½‰æ›è…³æœ¬
    â”‚   â”œâ”€â”€ convert.py     # Python è½‰æ›ç¨‹å¼
    â”‚   â””â”€â”€ README.md
    â”‚
    â”œâ”€â”€ models/            # è½‰æ›å¾Œçš„æ¨¡å‹
    â”‚   â””â”€â”€ {model}-mlx/
    â”‚
    â””â”€â”€ subtitle/          # ğŸ–¥ï¸ æµ®å‹•å­—å¹•è¦–çª—
        â”œâ”€â”€ subtitle.py    # å­—å¹•ç¨‹å¼
        â””â”€â”€ README.md
```

---

## æˆæ¬Š

MIT License
